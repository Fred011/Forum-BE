(this["webpackJsonpreact-auth-client-done-v2"]=this["webpackJsonpreact-auth-client-done-v2"]||[]).push([[0],{34:function(e,t,n){e.exports=n(62)},39:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(31),r=n.n(c),s=n(1),i=n(2),l=n(4),u=n(3),m=n(5),p=n(14),h=(n(39),n(10)),d=n(6),f=n(12),v=n.n(f),g=new(function(){function e(){Object(s.a)(this,e),this.auth=v.a.create({baseURL:"https://topit.herokuapp.com",withCredentials:!0})}return Object(i.a)(e,[{key:"signup",value:function(e){var t=e.username,n=e.password;return this.auth.post("/auth/signup",{username:t,password:n}).then((function(e){return e.data}))}},{key:"login",value:function(e){var t=e.username,n=e.password;return this.auth.post("/auth/login",{username:t,password:n}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.auth.post("/auth/logout",{}).then((function(e){return e.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(e){return e.data}))}}]),e}()),E=o.a.createContext(),U=E.Consumer,w=E.Provider,b=function(e){return function(t){function n(){return Object(s.a)(this,n),Object(l.a)(this,Object(u.a)(n).apply(this,arguments))}return Object(m.a)(n,t),Object(i.a)(n,[{key:"render",value:function(){var t=this;return o.a.createElement(U,null,(function(n){var a=n.login,c=n.signup,r=n.user,s=n.logout,i=n.isLoggedin,l=n.isLoading;return o.a.createElement(e,Object.assign({login:a,signup:c,user:r,logout:s,isLoggedin:i,isLoading:l},t.props))}))}}]),n}(o.a.Component)},V=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={isLoggedin:!1,user:null,isLoading:!0},n.signup=function(e){var t=e.username,a=e.password;g.signup({username:t,password:a}).then((function(e){return n.setState({isLoggedin:!0,user:e})})).catch((function(e){return console.log(e)}))},n.login=function(e){var t=e.username,a=e.password;g.login({username:t,password:a}).then((function(e){return n.setState({isLoggedin:!0,user:e})})).catch((function(e){return console.log(e)}))},n.logout=function(){g.logout().then((function(){return n.setState({isLoggedin:!1,user:null})})).catch((function(e){return console.log(e)}))},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.me().then((function(t){return e.setState({isLoggedin:!0,user:t,isLoading:!1})})).catch((function(t){return e.setState({isLoggedin:!1,user:null,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.isLoggedin,a=e.user,c=this.login,r=this.logout,s=this.signup;return o.a.createElement(w,{value:{isLoading:t,isLoggedin:n,user:a,login:c,logout:r,signup:s}},this.props.children)}}]),t}(o.a.Component),N=b(function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",password:"",email:""},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,o=t.password;n.props.signup({username:a,password:o})},n.handleChange=function(e){var t=e.target,a=t.name,o=t.value;n.setState(Object(h.a)({},a,o))},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.password,a=e.email;return o.a.createElement("div",{className:"login-container"},o.a.createElement("div",{className:"all-login"},o.a.createElement("form",{className:"log",onSubmit:this.handleFormSubmit},o.a.createElement("input",{type:"text",name:"username",value:t,placeholder:"username",onChange:this.handleChange}),o.a.createElement("input",{type:"email",name:"email",value:a,placeholder:"email address",onChange:this.handleChange}),o.a.createElement("input",{type:"password",name:"password",value:n,placeholder:"password",onChange:this.handleChange}),o.a.createElement("input",{className:"signup-btn",type:"submit",value:"Signup"})),o.a.createElement("p",{className:"log-sentence"},"Already have account?",o.a.createElement(d.b,{to:"/login"}," ",o.a.createElement("span",{className:"span-account2"},"Login")))))}}]),t}(a.Component)),O=b(function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",password:""},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,o=t.password;n.props.login({username:a,password:o})},n.handleChange=function(e){var t=e.target,a=t.name,o=t.value;n.setState(Object(h.a)({},a,o))},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.password;return o.a.createElement("div",{className:"login-container"},o.a.createElement("div",{className:"all-login"},o.a.createElement("form",{className:"log",onSubmit:this.handleFormSubmit},o.a.createElement("input",{type:"text",name:"username",value:t,placeholder:"username",onChange:this.handleChange}),o.a.createElement("input",{type:"password",name:"password",value:n,placeholder:"password",onChange:this.handleChange}),o.a.createElement("input",{className:"submit-btn",type:"submit",value:"Login"}),o.a.createElement("p",{className:"log-sentence"},"Don't have an account?"," ",o.a.createElement(d.b,{to:"/signup"},o.a.createElement("span",{className:"span-account"},"Sign Up")," ")))))}}]),t}(a.Component)),k=new function e(){var t=this;Object(s.a)(this,e),this.getAllTopics=function(){return t.topic.get("https://topit.herokuapp.com/home").then((function(e){return e.data})).catch((function(e){return console.log(e)}))},this.getOneTopic=function(e){return t.topic.get("https://topit.herokuapp.com"+"/topics/".concat(e)).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},this.getMyTopics=function(){return t.topic.get("https://topit.herokuapp.com/mytopics").then((function(e){return e.data})).catch((function(e){return console.log(e)}))},this.getUserTopic=function(e){return t.topic.get("https://topit.herokuapp.com"+"/mytopics/".concat(e)).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},this.addTopic=function(e){return t.topic.post("https://topit.herokuapp.com/addtopic",e).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},this.addVote=function(e){return t.topic.put("https://topit.herokuapp.com"+"/topic/".concat(e,"/vote")).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},this.cancelUpVote=function(e){return t.topic.put("https://topit.herokuapp.com"+"/topic/".concat(e,"/cancelupvote")).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},this.downVote=function(e){return t.topic.put("https://topit.herokuapp.com"+"/topic/".concat(e,"/downvote")).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},this.cancelDownVote=function(e){return t.topic.put("https://topit.herokuapp.com"+"/topic/".concat(e,"/canceldownvote")).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},this.deleteOneTopic=function(e){return t.topic.delete("https://topit.herokuapp.com"+"/mytopics/".concat(e,"/delete")).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},this.topic=v.a.create({baseURL:"https://topit.herokuapp.com",withCredentials:!0})},D=new(function(){function e(){Object(s.a)(this,e),this.user=v.a.create({baseURL:"https://topit.herokuapp.com",withCredentials:!0})}return Object(i.a)(e,[{key:"getMyComments",value:function(){return this.user.get("/mycomments").then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},{key:"getMyTopics",value:function(){return this.user.get("https://topit.herokuapp.com/mytopics").then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},{key:"getUserData",value:function(){return this.user.get("https://topit.herokuapp.com/profile").then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},{key:"updateUserData",value:function(e){return this.user.put("https://topit.herokuapp.com/profile/edit",e).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},{key:"addFavorites",value:function(e){return this.user.patch("https://topit.herokuapp.com"+"/favorites/add/".concat(e)).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},{key:"removeFavorites",value:function(e){return this.user.patch("https://topit.herokuapp.com"+"/topics/".concat(e,"/remove")).then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},{key:"getFavorites",value:function(){return this.user.get("/favorites").then((function(e){return e.data})).catch((function(e){return console.log(e)}))}},{key:"deleteUser",value:function(e){return this.user.delete("https://topit.herokuapp.com/profile",e).then((function(e){console.log(e)})).catch((function(e){return console.log(e)}))}}]),e}()),y=b(function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).getTopic=function(){var e=n.props.id;k.getOneTopic(e).then((function(e){n.setState({votes:e.vote})})).catch((function(e){return console.log(e)}))},n.getUser=function(){D.getUserData().then((function(e){n.setState({currentUserFav:e.favorites,currentUserDownVotes:e.downVotes,currentUserUpVotes:e.upVotes}),console.log("USER DATA",e)})).catch((function(e){return console.log(e)}))},n.checkIfUpVoted=function(){var e=n.props.id;D.getUserData().then((function(t){t.upVotes.includes(e)&&n.setState({currentUserUpVoted:!n.state.currentUserUpVoted})})).catch((function(e){return console.log(e)}))},n.checkIfDownVoted=function(){var e=n.props.id;D.getUserData().then((function(t){t.downVotes.includes(e)&&n.setState({currentUserDownVoted:!n.state.currentUserDownVoted})})).catch((function(e){return console.log(e)}))},n.handleUpVote=function(e){var t=n.props.id;k.addVote(t).then((function(){n.setState({currentUserUpVoted:n.state.currentUserUpVoted}),n.getTopic(),n.checkIfUpVoted(),n.checkIfDownVoted()})).catch((function(e){return console.log(e)}))},n.handleCancelUpVote=function(e){var t=n.props.id;k.cancelUpVote(t).then((function(){n.setState({currentUserUpVoted:!n.state.currentUserUpVoted}),n.getTopic(),n.checkIfUpVoted(),n.checkIfDownVoted()})).catch((function(e){return console.log(e)}))},n.handleDownVote=function(e){var t=n.props.id;k.downVote(t).then((function(){n.setState({currentUserDownVoted:n.state.currentUserDownVoted}),n.getTopic(),n.checkIfDownVoted(),n.checkIfUpVoted()})).catch((function(e){return console.log(e)}))},n.handleCancelDownVote=function(e){var t=n.props.id;k.cancelDownVote(t).then((function(){n.setState({currentUserDownVoted:!n.state.currentUserDownVoted}),n.getTopic(),n.checkIfDownVoted(),n.checkIfUpVoted()})).catch((function(e){return console.log(e)}))},n.refreshTopic=function(){var e=n.props.id;k.getOneTopic(e).then((function(e){return n.setState({vote:e.vote})})).catch((function(e){return console.log(e)}))},n.toggleUpVote=function(){var e=n.state.showArrowBlack;n.setState({showArrowBlack:!e})},n.toggleDownVote=function(){var e=n.state.showArrowBlack;n.setState({showArrowBlack:!e})},n.state={votes:0,currentUserFav:[],currentUserUpVotes:[],currentUserDownVotes:[],favorited:!1,currentUserUpVoted:!1,currentUserDownVoted:!1},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getTopic(),this.getUser(),console.log("IN MOUUUUUNT",this.props.vote),this.checkIfUpVoted(),this.checkIfDownVoted()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"card-container"},o.a.createElement("div",{className:"topic-card"},o.a.createElement("div",{className:"left-column"},o.a.createElement("div",{className:"photo"},o.a.createElement("img",{src:"/Photo Linkedin a envoyer copie.jpg",className:"img-topic",alt:"profile-picture"})),o.a.createElement("h4",{className:"topic-card-username"},this.props.creator.username," ")),o.a.createElement("div",{className:"right-column"},o.a.createElement(d.b,{to:"/topic/".concat(this.props.id)}," ",o.a.createElement("h3",null,this.props.title),o.a.createElement("p",null,this.props.description)),o.a.createElement("div",{className:"low-section-topic-card"},o.a.createElement("h5",null,this.state.currentUserDownVoted?o.a.createElement("img",{className:"arrow-vote",src:"/arrow-up.svg",onClick:function(){return e.handleCancelDownVote("+")},alt:"upVote"}):this.state.currentUserUpVoted?o.a.createElement("img",{onClick:function(){return e.handleCancelUpVote("-")},className:"arrow-vote",src:"/arrow-up2.svg",alt:"cancel vote"}):o.a.createElement("img",{onClick:function(){return e.handleUpVote("+")},className:"arrow-vote",src:"/arrow-up.svg",alt:"upVote"}),this.state.votes,this.state.currentUserUpVoted?o.a.createElement("img",{className:"arrow-vote",src:"/arrow-down.svg",onClick:function(){return e.handleCancelUpVote("-")},alt:"upVote"}):this.state.currentUserDownVoted?o.a.createElement("img",{className:"arrow-vote",src:"/arrow-down2.svg",onClick:function(){return e.handleCancelDownVote("+")},alt:"downVote"}):o.a.createElement("img",{className:"arrow-vote",src:"/arrow-down.svg",onClick:function(){return e.handleDownVote("-")},alt:"downVote"}),"comments ",this.props.comments.length)))))}}]),t}(a.Component)),C=b(function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.logout,n=e.isLoggedin,a=e.profile,c=e.addTopic;return o.a.createElement("div",{className:"navbar"},n?o.a.createElement("div",{className:"navbar"},o.a.createElement("div",{className:"nav-btn  first-btn"},o.a.createElement(d.b,{to:"/"},o.a.createElement("img",{src:"/home.svg",alt:"home-section"}))),o.a.createElement("div",{className:"nav-btn"},o.a.createElement(d.b,{to:"/profile"},o.a.createElement("img",{src:"/profile.svg",alt:"profile-section",onClick:a}))),o.a.createElement("div",{className:"nav-btn"},o.a.createElement(d.b,{to:"/favorites"},o.a.createElement("img",{src:"/favorites.svg",alt:"favorites-section"}))),o.a.createElement("div",{className:"nav-btn"},o.a.createElement(d.b,{to:"/mytopics"},o.a.createElement("img",{src:"/mytopics.svg",alt:"mytopics-section"}))),o.a.createElement("div",{className:"nav-btn"},o.a.createElement(d.b,{to:"/addtopic"},o.a.createElement("img",{src:"/create.svg",alt:"create a topic",onClick:c}))),o.a.createElement("div",{className:"logout-nav"},o.a.createElement("div",{className:"nav-btn"},o.a.createElement("img",{src:"/logout.svg",alt:"log out",onClick:t})))):o.a.createElement("div",null,o.a.createElement(d.b,{to:"/login"}," ",o.a.createElement("button",null,"Login")," "),o.a.createElement("br",null),o.a.createElement(d.b,{to:"/signup"}," ",o.a.createElement("button",null,"Signup")," ")))}}]),t}(a.Component)),j=b(function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={listOfTopics:[],listOfComments:[],creator:[],upvote:"",downvote:""},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.getAllTopics().then((function(t){e.setState({listOfTopics:t,listOfComments:t.comments,creator:t.creator,upvote:t.upVote,downvote:t.downVote})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.state.listOfTopics.map((function(e,t){return o.a.createElement(y,{title:e.title,creator:e.creator,description:e.message,comments:e.comments,vote:e.vote,date:e.created_at,id:e._id,key:t})}));return o.a.createElement("div",{className:"testcards"},o.a.createElement(C,null),o.a.createElement("div",{className:"home"},o.a.createElement("h1",null,"Recent"),o.a.createElement("div",{className:"active"}),o.a.createElement("div",{className:"big-topic-container"}),o.a.createElement("div",{className:"last-topics-container"},e)))}}]),t}(a.Component));function S(e){return o.a.createElement("div",{className:"default"},o.a.createElement("img",{src:"/JT404.gif",alt:"404 page not found"}),o.a.createElement("h1",null,"Seems you got lost !!"),o.a.createElement("p",null," http://topit.com",e.location.pathname," is not a good URL"))}b(function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"topicListProfile"},o.a.createElement("h1",null,"Topics List Profile"),o.a.createElement("ul",null,o.a.createElement("li",null,"topic 1"),o.a.createElement("li",null,"topic 2"),o.a.createElement("li",null,"topic 3"),o.a.createElement("li",null,"topic 4")))}}]),t}(a.Component));var T=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{className:"card-container"},o.a.createElement("div",{className:"topic-card-profile"},o.a.createElement("div",{className:"topic-preview-profile"},o.a.createElement("h3",null,this.props.title),o.a.createElement("p",null,this.props.message),o.a.createElement("h6",null," ",o.a.createElement("div",{className:"low-section-topic-card"},o.a.createElement("h5",null,o.a.createElement("img",{onClick:function(){return e.handleUpVote("+")},className:"arrow-vote",src:"/arrow-up.svg",alt:"upvote"}),this.props.votes,o.a.createElement("img",{className:"arrow-vote",src:"/arrow-down.svg",onClick:function(){return e.handleDownVote("-")},alt:"downVote"}),"comments ",this.props.comments.length)))))))}}]),t}(a.Component);var L=function(e){return o.a.createElement("div",null,o.a.createElement("div",{className:"card-container"},o.a.createElement("div",{className:"topic-card-profile"},o.a.createElement("div",{className:"topic-preview-profile"},o.a.createElement("p",null,e.message)))))},I=b(function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",description:"",topicsList:[],commentsList:[],userId:"",showCard:!0},n.getUserData=function(){D.getUserData().then((function(e){var t=e.username,a=e.description,o=e.topics,c=e.comments;n.setState({username:t,description:a,topicsList:o,commentsList:c,userId:e._id}),console.log("DATAAAAA",e)})).catch((function(e){return console.log(e)}))},n.toggleSection=function(){var e=n.state.showCard;n.setState({showCard:!e})},n.handleDeleteProfile=function(e){var t=n.state.userId;console.log("USERIDDDDDDD",n.state.userId),D.deleteUser(t).then(console.log("user deleted"))},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getUserData()}},{key:"render",value:function(){var e=this,t=this.state.commentsList.map((function(e){return o.a.createElement(L,{key:e._id,user:e.user,message:e.message})})),n=this.state.topicsList.map((function(e){return o.a.createElement(T,{key:e._id,title:e.title,message:e.message,votes:e.vote,comments:e.comments})}));return o.a.createElement("div",{className:"testcards"},o.a.createElement(C,null),o.a.createElement("div",{className:"profile-container"},o.a.createElement("div",{className:"profile-data"},o.a.createElement("img",{src:"/Photo Linkedin a envoyer copie.jpg",className:"profile-picture",alt:"profile picture"}),o.a.createElement("h2",null,this.state.username),this.state.description?o.a.createElement("p",null,this.state.description):o.a.createElement("p",{className:"description"},"Add a description"),o.a.createElement("div",{className:"edit-profile-container"},o.a.createElement(d.b,{to:"/profile-edit"},o.a.createElement("button",{className:"edit-btn"},"Edit")),o.a.createElement("button",{className:"delete-btn",onClick:function(){return e.handleDeleteProfile()}},o.a.createElement("img",{className:"delete-profile",src:"/trash-2-white.svg",alt:"delete"})))),o.a.createElement("div",{className:"separation-profile"}," ",o.a.createElement("p",null," ")),o.a.createElement("div",{className:"fav-section"},o.a.createElement("h2",{onClick:function(){return e.toggleSection()}},"TOPICS / COMMENTS"),this.state.showCard?o.a.createElement("div",null,n,o.a.createElement("div",{className:"end-section"})):o.a.createElement("div",null,t,o.a.createElement("div",{className:"end-section"})))))}}]),t}(a.Component)),A=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",description:"",userID:[]},n.handleChange=function(e){var t=e.target,a=t.name,o=t.value;n.setState(Object(h.a)({},a,o))},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state;D.updateUserData(t).then((function(){n.props.history.push("/profile")}))},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;D.getUserData().then((function(t){e.setState({username:t.username,description:t.description,userID:t._id})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"testcards"},o.a.createElement(C,null),o.a.createElement("div",{className:"edit-form-container"},o.a.createElement("div",{className:"form-profile"},o.a.createElement("form",{className:"edit-profile-form edit-profile-form-inside",onSubmit:this.handleFormSubmit},o.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}}),o.a.createElement("textarea",{name:"description",value:this.state.description,placeholder:"About you",onChange:function(t){return e.handleChange(t)}}),o.a.createElement("button",{className:"submit-btn",type:"submit",value:"Submit"},"SUBMIT")))))}}]),t}(a.Component),R=Object(p.g)(A),F=new function e(){var t=this;Object(s.a)(this,e),this.getMyComments=function(){return t.comment.get("https://topit.herokuapp.com/mycomments").then((function(e){return e.data})).catch((function(e){return console.log(e)}))},this.addComment=function(e,n){return t.comment.post("https://topit.herokuapp.com"+"/topic/".concat(e,"/comment"),n).then((function(e){return e.data})).catch((function(e){return console.log(e)}))},this.comment=v.a.create({baseURL:"https://topit.herokuapp.com",withCredentials:!0})},M=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,a=t.name,o=t.value;n.setState(Object(h.a)({},a,o))},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state;F.addComment(n.props.topicID,t).then((function(){n.props.refreshTopic(),n.setState({message:""})}))},n.state={message:""},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"comment-form-container"},o.a.createElement("div",{className:"comment-bar"},o.a.createElement("form",{className:"comment-form",onSubmit:this.handleFormSubmit},o.a.createElement("input",{type:"text",className:"input-comment",name:"message",value:this.state.message,onChange:function(t){return e.handleChange(t)}}),o.a.createElement("input",{className:"submit-btn",type:"submit",value:"Submit"}))))}}]),t}(a.Component),x=Object(p.g)(M);var _=function(e){return o.a.createElement("div",{className:"comment-topic-container"},o.a.createElement("div",null,o.a.createElement("p",null,e.commentMsg),o.a.createElement("div",{className:"separation-2"})))},P=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={topic:[],listOfComments:[],creator:"",votes:0,favorites:[],userVotes:[],favorited:!1,currentUserUpVote:!1,currentUserDownVote:!1},n.getTopic=function(){var e=n.props.match.params.id;k.getOneTopic(e).then((function(e){n.setState({topic:e,listOfComments:e.comments,votes:e.vote,favorites:e.favorites,creator:e.creator.username})})).catch((function(e){return console.log(e)}))},n.checkIfUpVoted=function(){var e=n.props.match.params.id;D.getUserData().then((function(t){var a=t.upVotes;console.log("USERRRRRR UPVOTESSS",t.upVotes),a.includes(e)&&(n.setState({currentUserUpVote:!n.state.currentUserUpVote}),console.log("TRUUUUUUUUUUUUUUUUUE",n.state.currentUserUpVote))})).catch((function(e){return console.log(e)}))},n.checkIfDownVoted=function(){var e=n.props.match.params.id;D.getUserData().then((function(t){var a=t.downVotes;console.log("USERRRRRR DOWNNNNVOTESSS",t.downVotes),a.includes(e)?(n.setState({currentUserDownVote:!n.state.currentUserDownVote}),console.log("TRUUUUUUUUUUUUUUUUUE",n.state.currentUserDownVote)):console.log("FAAAAAAALLSSSSSEEEE",n.state.currentUserDownVote)})).catch((function(e){return console.log(e)}))},n.handleUpVote=function(e){var t=n.props.match.params.id;k.addVote(t).then((function(){n.setState({currentUserUpVote:n.state.currentUserUpVote}),n.getTopic(),n.checkIfUpVoted(),n.checkIfDownVoted()})).catch((function(e){return console.log(e)}))},n.handleCancelUpVote=function(e){var t=n.props.match.params.id;k.cancelUpVote(t).then((function(){n.setState({currentUserUpVote:!n.state.currentUserUpVote}),n.getTopic(),n.checkIfUpVoted(),n.checkIfDownVoted()})).catch((function(e){return console.log(e)}))},n.handleDownVote=function(e){var t=n.props.match.params.id;k.downVote(t).then((function(){n.setState({currentUserDownVote:n.state.currentUserDownVote}),n.getTopic(),n.checkIfDownVoted(),n.checkIfUpVoted()})).catch((function(e){return console.log(e)}))},n.handleCancelDownVote=function(e){var t=n.props.match.params.id;k.cancelDownVote(t).then((function(){n.setState({currentUserDownVote:!n.state.currentUserDownVote}),n.getTopic(),n.checkIfDownVoted(),n.checkIfUpVoted()})).catch((function(e){return console.log(e)}))},n.handleDeleteTopic=function(){var e=n.props.match.params.id;k.deleteOneTopic(e).then((function(){n.props.history.push("/mytopics")}))},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getTopic(),this.checkIfUpVoted(),this.checkIfDownVoted()}},{key:"render",value:function(){var e=this,t=this.state.topic,n=this.state.creator,a=this.state.listOfComments.map((function(e){return o.a.createElement("div",{className:"commentMsg",key:e._id},o.a.createElement(_,{commentMsg:e.message,commentUser:e.creator,commentDate:e.createdAt}))}));return o.a.createElement("div",{className:"testcards"},o.a.createElement(C,null),o.a.createElement("div",{className:"test-flex"},t?o.a.createElement("div",{className:"topic-details-container"},o.a.createElement("div",{className:"left-part"},o.a.createElement("div",{className:"topic-info"},o.a.createElement("h1",null,t.title),o.a.createElement("p",null,t.message),o.a.createElement("h6",null," ",o.a.createElement("div",{className:"low-section-topic-card"},o.a.createElement("h5",null,this.state.currentUserDownVote?o.a.createElement("img",{className:"arrow-vote",src:"/arrow-up.svg",onClick:function(){return e.handleCancelDownVote("+")},alt:"upVote"}):this.state.currentUserUpVote?o.a.createElement("img",{onClick:function(){return e.handleCancelUpVote("-")},className:"arrow-vote",src:"/arrow-up2.svg",alt:"cancel vote"}):o.a.createElement("img",{onClick:function(){return e.handleUpVote("+")},className:"arrow-vote",src:"/arrow-up.svg",alt:"upVote"}),this.state.votes,this.state.currentUserUpVote?o.a.createElement("img",{className:"arrow-vote",src:"/arrow-down.svg",onClick:function(){return e.handleCancelUpVote("-")},alt:"upVote"}):this.state.currentUserDownVote?o.a.createElement("img",{className:"arrow-vote",src:"/arrow-down2.svg",onClick:function(){return e.handleCancelDownVote("+")},alt:"downVote"}):o.a.createElement("img",{className:"arrow-vote",src:"/arrow-down.svg",onClick:function(){return e.handleDownVote("-")},alt:"downVote"}),"comments ",this.state.listOfComments.length),o.a.createElement("div",null,o.a.createElement("img",{className:"delete",src:"/trash-2.svg",onClick:function(){return e.handleDeleteTopic()},alt:"delete"}))))),o.a.createElement(x,{refreshTopic:this.getTopic,topicID:t._id}),o.a.createElement("div",{className:"comment-section"},a)),o.a.createElement("div",{className:"separation"}),o.a.createElement("div",{className:"topic-user"},o.a.createElement("div",{className:"photo-in-topic"},o.a.createElement("img",{src:"/Photo Linkedin a envoyer copie.jpg",className:"img-inside-topic",alt:""})),o.a.createElement("div",{className:"name-user-topic"},n.username))):o.a.createElement("h1",null,"loading..")))}}]),t}(a.Component),B=(a.Component,function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={vote:n.props.votes},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{className:"card-container"},o.a.createElement("div",{className:"topic-card-special"},o.a.createElement("div",{className:"topic-card-title"},o.a.createElement("h3",null,this.props.title)),o.a.createElement("div",{className:"my-topic-card_votes"},o.a.createElement("p",{className:"votesss"},o.a.createElement("img",{className:"arrow-vote",src:"/arrow-up.svg",alt:"upvote"}),this.props.votes,o.a.createElement("img",{className:"arrow-vote",src:"/arrow-down.svg",alt:"downVote"}))))))}}]),t}(a.Component)),G=b(function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={listOfTopics:[],username:"",description:"",commentsList:[]},n.getUserData=function(){D.getUserData().then((function(e){var t=e.username,a=e.description,o=e.topics,c=e.comments;n.setState({username:t,description:a,listOfTopics:o,commentsList:c})})).catch((function(e){return console.log(e)}))},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getUserData()}},{key:"render",value:function(){var e=this.state.listOfTopics,t=e.map((function(e,t){return console.log("ELEMENT",e),o.a.createElement(d.b,{to:"/mytopics/".concat(e._id),key:t},o.a.createElement(B,{creator:e.creator,title:e.title,description:e.message,votes:e.vote,comments:e.comments,id:e._id}))}));return o.a.createElement("div",{className:"testcards"},o.a.createElement(C,null),o.a.createElement("div",{className:"big-topic-container"},o.a.createElement("div",{className:"my-topics-section"},o.a.createElement("h1",{className:"favorites-title"},"My Topics"),o.a.createElement("div",{className:"active"}),e?o.a.createElement("div",null,t):o.a.createElement("h1",null,"Loading..."))))}}]),t}(a.Component));var J=function(e){return o.a.createElement("div",{className:"card-container"},o.a.createElement("div",{className:"my-comments"},o.a.createElement("p",null,e.message)))},W=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={listOfComments:[]},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;F.getMyComments().then((function(t){e.setState({listOfComments:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.state.listOfComments,t=e.map((function(e,t){return o.a.createElement(J,{message:e.message,id:e._id,key:t})}));return o.a.createElement("div",{className:"testcards"},o.a.createElement(C,null),o.a.createElement("div",{className:"big-topic-container"},o.a.createElement("div",null,e?o.a.createElement("div",null,t):o.a.createElement("h1",null,"Loading..."))))}}]),t}(a.Component),X=b(function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).getTopic=function(){var e=n.props.match.params.id;k.getOneTopic(e).then((function(e){n.setState({topic:e,listOfComments:e.comments,votes:e.vote,favorites:e.favorites,creator:e.creator.username})})).catch((function(e){return console.log(e)}))},n.checkIfFavorite=function(){var e=n.props.match.params.id;D.getUserData().then((function(t){t.favorites.includes(e)&&n.setState({favorited:!n.favorited})})).catch((function(e){return console.log(e)}))},n.checkIfUpVoted=function(){var e=n.props.match.params.id;D.getUserData().then((function(t){var a=t.upVotes;console.log("USERRRRRR UPVOTESSS",t.upVotes),a.includes(e)&&(n.setState({currentUserUpVote:!n.state.currentUserUpVote}),console.log("TRUUUUUUUUUUUUUUUUUE",n.state.currentUserUpVote))})).catch((function(e){return console.log(e)}))},n.checkIfDownVoted=function(){var e=n.props.match.params.id;D.getUserData().then((function(t){var a=t.downVotes;console.log("USERRRRRR DOWNNNNVOTESSS",t.downVotes),a.includes(e)&&(n.setState({currentUserDownVote:!n.state.currentUserDownVote}),console.log("TRUUUUUUUUUUUUUUUUUE",n.state.currentUserDownVote))})).catch((function(e){return console.log(e)}))},n.handleChange=function(e){var t=e.target,a=t.name,o=t.value;n.setState(Object(h.a)({},a,o))},n.handleDeleteTopic=function(e){var t=n.props.match.params.id;e.preventDefault(),k.deleteOneTopic(t).then((function(){n.props.history.push("/")}))},n.handleFavorites=function(e){var t=n.props.match.params.id;D.addFavorites(t).then((function(e){return console.log("DATA",e)})).catch((function(e){return console.log(e)})),"+"===e&&n.setState({favorited:!0})},n.handleRemoveFavorites=function(e){var t=n.props.match.params.id;D.removeFavorites(t).then((function(e){return console.log("REMOVEDDDDD",e)})).catch((function(e){return console.log(e)})),"-"===e&&n.setState({favorited:!1})},n.handleUpVote=function(e){var t=n.props.match.params.id;k.addVote(t).then((function(){n.setState({currentUserUpVote:n.state.currentUserUpVote}),n.getTopic(),n.checkIfUpVoted(),n.checkIfDownVoted()})).catch((function(e){return console.log(e)}))},n.handleCancelUpVote=function(e){var t=n.props.match.params.id;k.cancelUpVote(t).then((function(){n.setState({currentUserUpVote:!n.state.currentUserUpVote}),n.getTopic(),n.checkIfUpVoted(),n.checkIfDownVoted()})).catch((function(e){return console.log(e)}))},n.handleDownVote=function(e){var t=n.props.match.params.id;k.downVote(t).then((function(){n.setState({currentUserDownVote:n.state.currentUserDownVote}),n.getTopic(),n.checkIfDownVoted(),n.checkIfUpVoted()})).catch((function(e){return console.log(e)}))},n.handleCancelDownVote=function(e){var t=n.props.match.params.id;k.cancelDownVote(t).then((function(){n.setState({currentUserDownVote:!n.state.currentUserDownVote}),n.getTopic(),n.checkIfDownVoted(),n.checkIfUpVoted()})).catch((function(e){return console.log(e)}))},n.state={topic:[],creator:"",listOfComments:[],favorites:[],userVotes:[],votes:0,favorited:!1,currentUserUpVote:!1,currentUserDownVote:!1},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getTopic(),this.checkIfFavorite(),this.checkIfUpVoted(),this.checkIfDownVoted()}},{key:"render",value:function(){var e=this,t=this.state.listOfComments.map((function(e){return o.a.createElement("div",{className:"commentMsg",key:e._id},o.a.createElement(_,{commentMsg:e.message,commentUser:e.user.username,commentDate:e.createdAt}))})),n=this.state.topic,a=n.title,c=n.message;n.creator,this.props.user.username;return o.a.createElement("div",{className:"testcards"},o.a.createElement(C,null),o.a.createElement("div",{className:"test-flex"},o.a.createElement("div",null,o.a.createElement("div",{className:"test-flex"},o.a.createElement("div",{className:"topic-details-container"},o.a.createElement("div",{className:"left-part"},o.a.createElement("div",{className:"topic-info"},o.a.createElement("h1",null,a),o.a.createElement("p",null,c),o.a.createElement("h6",null," ",o.a.createElement("div",{className:"low-section-topic-card"},o.a.createElement("h5",null,this.state.currentUserDownVote?o.a.createElement("img",{className:"arrow-vote",src:"/arrow-up.svg",onClick:function(){return e.handleCancelDownVote("+")},alt:"upVote"}):this.state.currentUserUpVote?o.a.createElement("img",{onClick:function(){return e.handleCancelUpVote("-")},className:"arrow-vote",src:"/arrow-up2.svg",alt:"cancel vote"}):o.a.createElement("img",{onClick:function(){return e.handleUpVote("+")},className:"arrow-vote",src:"/arrow-up.svg",alt:"upVote"}),this.state.votes,this.state.currentUserUpVote?o.a.createElement("img",{className:"arrow-vote",src:"/arrow-down.svg",onClick:function(){return e.handleCancelUpVote("-")},alt:"upVote"}):this.state.currentUserDownVote?o.a.createElement("img",{className:"arrow-vote",src:"/arrow-down2.svg",onClick:function(){return e.handleCancelDownVote("+")},alt:"downVote"}):o.a.createElement("img",{className:"arrow-vote",src:"/arrow-down.svg",onClick:function(){return e.handleDownVote("-")},alt:"downVote"}),"comments ",this.state.listOfComments.length),this.state.favorited?o.a.createElement("img",{className:"favorite",src:"/heart2.svg",alt:"favorite",onClick:function(t){e.handleRemoveFavorites("-")}}):o.a.createElement("img",{className:"favorite",src:"/favorite.svg",alt:"favorite",onClick:function(t){e.handleFavorites("+")}})))),o.a.createElement(x,{refreshTopic:this.getTopic,topicID:this.state.topic._id}),o.a.createElement("div",{className:"comment-section"},t)),o.a.createElement("div",{className:"separation"}),o.a.createElement("div",{className:"topic-user"},o.a.createElement("div",{className:"photo-in-topic"},o.a.createElement("img",{src:"/Photo Linkedin a envoyer copie.jpg",className:"img-inside-topic",alt:"profile-picture"})),o.a.createElement("div",{className:"name-user-topic"},o.a.createElement("p",{className:"posted"},"posted by ",this.state.creator))))))))}}]),t}(a.Component)),q=b(function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={favoritesList:[]},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;D.getFavorites().then((function(t){e.setState({favoritesList:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.state.favoritesList,t=e.map((function(e,t){return o.a.createElement(y,{title:e.title,creator:e.creator,description:e.message,comments:e.comments,upvote:e.upVote,date:e.created_at,id:e._id,key:t})}));return o.a.createElement("div",{className:"testcards"},o.a.createElement(C,null),o.a.createElement("div",{className:"big-topic-container"},o.a.createElement("div",{className:"favorites-section"},o.a.createElement("h1",{className:"favorites-title"},"Favorites"),o.a.createElement("div",{className:"active"}),e?o.a.createElement("div",{className:"last-favorites-added"},t):o.a.createElement("h1",null,"Loading..."))))}}]),t}(a.Component)),Y=n(17);var z=b((function(e){var t=e.component,n=e.isLoggedin,a=e.isLoading,c=Object(Y.a)(e,["component","isLoggedin","isLoading"]);return a?o.a.createElement("h1",null,"Loading"):o.a.createElement(p.b,Object.assign({},c,{render:function(e){return n?o.a.createElement(p.a,{to:"/"}):o.a.createElement(t,e)}}))}));var H=b((function(e){var t=e.component,n=e.isLoggedin,a=e.isLoading,c=Object(Y.a)(e,["component","isLoggedin","isLoading"]);return a?o.a.createElement("h1",null,"Loading"):o.a.createElement(p.b,Object.assign({},c,{render:function(e){return n?o.a.createElement(t,e):o.a.createElement(p.a,{to:"/login"})}}))})),K=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={title:"",message:"",category:""},n.handleChange=function(e){var t=e.target,a=t.name,o=t.value;n.setState(Object(h.a)({},a,o))},n.handleFormSubmit=function(e){e.preventDefault();var t=n.state;k.addTopic(t).then((function(){window.location="/"}))},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"add-topic-container"},o.a.createElement("div",{className:"div-add-topic"},o.a.createElement("form",{className:"add-topic-form",onSubmit:this.handleFormSubmit},o.a.createElement("input",{type:"text",className:"title-input",name:"title",value:this.state.title,placeholder:"Title",onChange:function(t){return e.handleChange(t)}}),o.a.createElement("select",{name:"category",required:!0,onChange:function(t){return e.handleChange(t)}},o.a.createElement("option",{selected:!0,disabled:!0,hidden:!0,value:"Default"},"Choose one"),o.a.createElement("option",{value:"Gaming"},"Choose one"),o.a.createElement("option",{value:"Gaming"},"Gaming"),o.a.createElement("option",{value:"Lifestyle"},"Lifestyle"),o.a.createElement("option",{value:"Sport"},"Sport"),o.a.createElement("option",{value:"Food"},"Food"),o.a.createElement("option",{value:"Coding"},"UX-UI"),o.a.createElement("option",{value:"UX-UI"},"Coding"),o.a.createElement("option",{value:"Fun"},"Fun"),o.a.createElement("option",{value:"Random"},"Random")),o.a.createElement("textarea",{name:"message",value:this.state.message,placeholder:"Your topic here",onChange:function(t){return e.handleChange(t)}}),o.a.createElement("input",{className:"submit-btn",type:"submit",value:"Submit"}),o.a.createElement(d.b,{to:"/"},o.a.createElement("button",{className:"delete-btn"},"Cancel")))))}}]),t}(a.Component),Q=Object(p.g)(K),Z=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"testcards"},o.a.createElement(C,null),o.a.createElement("div",{className:"all-login"},o.a.createElement("div",{className:"log"},o.a.createElement(Q,null))))}}]),t}(a.Component),$=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={topicsArr:[],showNav:!1,search:""},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(p.d,null,o.a.createElement(z,{exact:!0,path:"/signup",component:N}),o.a.createElement(z,{exact:!0,path:"/login",component:O}),o.a.createElement(H,{exact:!0,path:"/profile",component:I}),o.a.createElement(H,{exact:!0,path:"/profile-edit",component:R}),o.a.createElement(H,{exact:!0,path:"/addtopic",component:Z}),o.a.createElement(H,{exact:!0,path:"/topic/:id",component:X}),o.a.createElement(H,{exact:!0,path:"/mytopics",component:G}),o.a.createElement(H,{exact:!0,path:"/mytopics/:id",component:P}),o.a.createElement(H,{exact:!0,path:"/mycomments",component:W}),o.a.createElement(H,{exact:!0,path:"/favorites",component:q}),o.a.createElement(H,{exact:!0,path:"/",component:j}),o.a.createElement(p.b,{component:S})))}}]),t}(a.Component);r.a.render(o.a.createElement(d.a,null,o.a.createElement(V,null,o.a.createElement($,null))),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.46ad8d8e.chunk.js.map